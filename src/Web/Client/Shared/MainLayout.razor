@using Web.Client.Common;
@inherits LayoutComponentBase

@inject UserDataService _userDataService

<MudThemeProvider IsDarkMode="true" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1">
        <MudLink Typo="Typo.h5" Class="mx-3" Color="Color.Default" Underline="Underline.None" Href="/">Task Tracker</MudLink>
        <HierarchyNavigation />
        <MudSpacer />
        <AccessControl/>
    </MudAppBar>
    <MudMainContent Class="max-height">
        <MudContainer MaxWidth="MaxWidth.ExtraExtraLarge" Class="pt-2 px-8 max-height">
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    protected override async Task OnInitializedAsync()
    {
        // Added here to set the current user when refreshing a page or opening a new tab as an authenticated user
        await _userDataService.OnSignIn();
    }
}